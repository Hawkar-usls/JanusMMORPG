<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>POCKET SURVIVAL</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #111;
            --ui-bg: rgba(20, 20, 20, 0.95);
            --ui-border: rgba(255, 255, 255, 0.15);
            --accent: #f0a500;
            --danger: #ff4444;
            --success: #44ff44;
            --text: #eee;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            margin: 0; padding: 0; width: 100vw; height: 100dvh;
            background: var(--bg); color: var(--text);
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º –∑—É–º –∏ —Å–∫—Ä–æ–ª–ª –±—Ä–∞—É–∑–µ—Ä–∞ */
        }

        /* CANVAS LAYER */
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            image-rendering: pixelated; /* –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å */
        }

        /* UI HUD LAYER */
        .hud-top {
            position: absolute; top: 10px; left: 10px; right: 10px;
            display: flex; justify-content: space-between;
            pointer-events: none; /* –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–ª–∏–∫–∏ —Å–∫–≤–æ–∑—å UI –Ω–∞ –∫–∞–Ω–≤–∞—Å */
        }

        .stats-panel {
            background: var(--ui-bg);
            border: 1px solid var(--ui-border);
            border-radius: 8px;
            padding: 8px 12px;
            pointer-events: auto;
            display: flex; gap: 15px;
            backdrop-filter: blur(4px);
        }

        .stat-item { display: flex; flex-direction: column; align-items: center; width: 40px; }
        .stat-label { font-size: 10px; color: #888; margin-bottom: 2px; }
        .stat-bar { width: 100%; height: 4px; background: #333; border-radius: 2px; overflow: hidden; }
        .stat-fill { height: 100%; transition: width 0.3s; }

        .res-panel {
            background: var(--ui-bg);
            border: 1px solid var(--ui-border);
            border-radius: 8px;
            padding: 8px;
            pointer-events: auto;
            display: flex; flex-direction: column; gap: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
        }

        /* LOG */
        #game-log {
            position: absolute; bottom: 100px; left: 10px;
            width: 200px; height: 100px;
            pointer-events: none;
            overflow: hidden;
            display: flex; flex-direction: column; justify-content: flex-end;
            text-shadow: 1px 1px 2px #000;
            font-size: 12px; opacity: 0.8;
        }
        .log-entry { margin-top: 2px; animation: fadeOut 5s forwards; }
        @keyframes fadeOut { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }

        /* BOTTOM CONTROLS */
        .bottom-bar {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--ui-bg);
            border-top: 1px solid var(--ui-border);
            padding: 10px 15px 25px 15px; /* Extra bottom for iPhone home bar */
            display: flex; justify-content: space-around;
            gap: 10px;
        }

        .btn {
            background: #333; border: 1px solid #555;
            color: white; padding: 10px; border-radius: 8px;
            flex: 1; text-align: center; font-size: 13px; font-weight: 600;
            cursor: pointer; position: relative;
        }
        .btn:active { transform: scale(0.96); }
        .btn.active { background: var(--accent); color: #000; border-color: var(--accent); }

        /* Build Menu Overlay */
        .build-menu {
            position: absolute; bottom: 90px; left: 10px; right: 10px;
            background: #1a1a1a; border: 1px solid var(--ui-border);
            border-radius: 12px; padding: 15px;
            display: none; grid-template-columns: repeat(4, 1fr); gap: 10px;
        }
        .build-menu.visible { display: grid; }
        
        .build-item {
            background: #252525; border-radius: 8px; padding: 10px;
            text-align: center; border: 1px solid #333;
            cursor: pointer;
        }
        .build-item.selected { border-color: var(--accent); }
        .build-icon { font-size: 20px; display: block; margin-bottom: 5px; }
        .build-cost { font-size: 10px; color: #aaa; }

    </style>
</head>
<body>

    <div class="hud-top">
        <div class="stats-panel">
            <div class="stat-item">
                <span class="stat-label">HP</span>
                <div class="stat-bar"><div class="stat-fill" id="hp-bar" style="width: 100%; background: #ff4444;"></div></div>
            </div>
            <div class="stat-item">
                <span class="stat-label">EDA</span>
                <div class="stat-bar"><div class="stat-fill" id="hunger-bar" style="width: 90%; background: #ffaa00;"></div></div>
            </div>
            <div class="stat-item">
                <span class="stat-label">ENG</span>
                <div class="stat-bar"><div class="stat-fill" id="energy-bar" style="width: 80%; background: #44aaff;"></div></div>
            </div>
        </div>

        <div class="res-panel">
            <div>üå≤ <span id="res-wood">0</span></div>
            <div>ü™® <span id="res-stone">0</span></div>
            <div>üçñ <span id="res-food">0</span></div>
        </div>
    </div>

    <div id="game-log"></div>

    <div class="build-menu" id="build-menu">
        <div class="build-item" onclick="selectBuild('wall')">
            <span class="build-icon">üß±</span>
            <span class="build-name">–°—Ç–µ–Ω–∞</span>
            <div class="build-cost">5 üå≤</div>
        </div>
        <div class="build-item" onclick="selectBuild('floor')">
            <span class="build-icon">‚¨ú</span>
            <span class="build-name">–ü–æ–ª</span>
            <div class="build-cost">2 üå≤</div>
        </div>
        <div class="build-item" onclick="selectBuild('fire')">
            <span class="build-icon">üî•</span>
            <span class="build-name">–ö–æ—Å—Ç–µ—Ä</span>
            <div class="build-cost">10 üå≤ 5 ü™®</div>
        </div>
        <div class="build-item" onclick="selectBuild('bed')">
            <span class="build-icon">üõèÔ∏è</span>
            <span class="build-name">–õ–µ–∂–∞–∫</span>
            <div class="build-cost">20 üå≤</div>
        </div>
    </div>

    <canvas id="game"></canvas>

    <div class="bottom-bar">
        <div class="btn active" id="mode-move" onclick="setMode('move')">üñê –î–µ–π—Å—Ç–≤–∏–µ</div>
        <div class="btn" id="mode-build" onclick="setMode('build')">üî® –°—Ç—Ä–æ–π–∫–∞</div>
        <div class="btn" onclick="eatFood()">üçñ –ï—Å—Ç—å</div>
    </div>

<script>
    // --- TELEGRAM INIT ---
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.ready();
    const USER_ID = tg.initDataUnsafe?.user?.id || "local_dev";

    // --- ENGINE CONSTANTS ---
    const TILE_SIZE = 48; // –†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏
    const MAP_SIZE = 60;  // –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã
    const VIEWPORT_PAD = 2; // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞
    
    // –¢–∏–ø—ã —Ç–∞–π–ª–æ–≤
    const T = {
        GRASS: 0,
        WATER: 1,
        FLOOR: 2,
        WALL: 3,
        TREE: 4,
        ROCK: 5,
        FIRE: 6
    };

    // –¶–≤–µ—Ç–∞ –∏ —Å–ø—Ä–∞–π—Ç—ã (–≠–º–æ–¥–∑–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã)
    const COLORS = {
        [T.GRASS]: '#2d3e26',
        [T.WATER]: '#1ca3ec',
        [T.FLOOR]: '#4a3b2a',
        [T.WALL]: '#666',
        [T.TREE]: '#2d3e26', // –§–æ–Ω –ø–æ–¥ –¥–µ—Ä–µ–≤–æ–º
        [T.ROCK]: '#2d3e26',
        [T.FIRE]: '#4a3b2a'
    };

    const SPRITES = {
        [T.TREE]: 'üå≤',
        [T.ROCK]: 'ü™®',
        [T.WALL]: 'üß±',
        [T.FIRE]: 'üî•',
        [T.WATER]: 'üåä'
    };

    // --- STATE ---
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    
    let camera = { x: 0, y: 0 };
    let mode = 'move'; // move, build
    let buildTarget = null;
    let lastTime = 0;

    // Player State
    const player = {
        x: Math.floor(MAP_SIZE/2),
        y: Math.floor(MAP_SIZE/2),
        targetX: null,
        targetY: null,
        moveTimer: 0,
        speed: 150, // ms per tile
        hp: 100,
        hunger: 100,
        energy: 100,
        inv: { wood: 0, stone: 0, food: 0 }
    };

    // Map Data
    const map = [];
    const objects = []; // {x, y, type, hp}

    // --- INITIALIZATION ---
    function init() {
        resize();
        generateMap();
        window.addEventListener('resize', resize);
        // Input handlers
        canvas.addEventListener('pointerdown', handleInput);
        
        // Loop
        requestAnimationFrame(loop);
        
        // Stats ticker
        setInterval(() => {
            player.hunger = Math.max(0, player.hunger - 1);
            player.energy = Math.max(0, player.energy - 0.5);
            if(player.hunger === 0) player.hp = Math.max(0, player.hp - 1);
            updateHUD();
        }, 2000);
    }

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        // –û—Ç–∫–ª—é—á–∞–µ–º —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –¥–ª—è –ø–∏–∫—Å–µ–ª—å-–∞—Ä—Ç–∞
        ctx.imageSmoothingEnabled = false;
    }

    // --- GENERATION ---
    function generateMap() {
        for(let x=0; x<MAP_SIZE; x++) {
            map[x] = [];
            for(let y=0; y<MAP_SIZE; y++) {
                // –®—É–º –≤–æ–¥—ã
                if(Math.random() < 0.05) {
                    map[x][y] = T.WATER;
                } else {
                    map[x][y] = T.GRASS;
                    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
                    if(Math.random() < 0.15) {
                        objects.push({x, y, type: T.TREE, hp: 3});
                    } else if (Math.random() < 0.05) {
                        objects.push({x, y, type: T.ROCK, hp: 4});
                    }
                }
            }
        }
        // –û—á–∏—â–∞–µ–º —Å–ø–∞–≤–Ω
        const pc = Math.floor(MAP_SIZE/2);
        map[pc][pc] = T.GRASS;
        removeObjectAt(pc, pc);
    }

    function removeObjectAt(x, y) {
        const idx = objects.findIndex(o => o.x === x && o.y === y);
        if(idx !== -1) objects.splice(idx, 1);
    }
    
    function getObjectAt(x, y) {
        return objects.find(o => o.x === x && o.y === y);
    }

    // --- GAME LOGIC ---
    function loop(timestamp) {
        const dt = timestamp - lastTime;
        lastTime = timestamp;

        updatePlayer(dt);
        updateCamera();
        render();

        requestAnimationFrame(loop);
    }

    function updatePlayer(dt) {
        if (player.targetX !== null && player.targetY !== null) {
            player.moveTimer += dt;
            if (player.moveTimer > player.speed) {
                player.moveTimer = 0;
                
                // Simple movement logic (one step closer)
                const dx = Math.sign(player.targetX - player.x);
                const dy = Math.sign(player.targetY - player.y);
                
                let nextX = player.x + dx;
                let nextY = player.y + dy;

                // Move X first if possible
                if(dx !== 0 && canWalk(nextX, player.y)) {
                    player.x += dx;
                } else if (dy !== 0 && canWalk(player.x, nextY)) {
                    player.y += dy;
                }

                // Check arrival
                if (player.x === player.targetX && player.y === player.targetY) {
                    // Arrived - perform action
                    player.targetX = null;
                    player.targetY = null;
                    performActionAt(player.x, player.y);
                }
            }
        }
    }

    function canWalk(x, y) {
        if(x < 0 || y < 0 || x >= MAP_SIZE || y >= MAP_SIZE) return false;
        if(map[x][y] === T.WATER) return false;
        // –ù–µ–ª—å–∑—è —Ö–æ–¥–∏—Ç—å —Å–∫–≤–æ–∑—å –∫–∞–º–Ω–∏, –Ω–æ –º–æ–∂–Ω–æ —Å–∫–≤–æ–∑—å –¥–µ—Ä–µ–≤—å—è (—á—Ç–æ–±—ã —Ä—É–±–∏—Ç—å —Å—Ç–æ—è –Ω–∞ –Ω–∏—Ö)
        const obj = getObjectAt(x, y);
        if(obj && (obj.type === T.ROCK || obj.type === T.WALL)) return false;
        return true;
    }

    function updateCamera() {
        // –ö–∞–º–µ—Ä–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∏–≥—Ä–æ–∫–µ
        const cx = player.x * TILE_SIZE + TILE_SIZE/2;
        const cy = player.y * TILE_SIZE + TILE_SIZE/2;
        
        camera.x = cx - canvas.width / 2;
        camera.y = cy - canvas.height / 2;
    }

    // --- INTERACTION ---
    function handleInput(e) {
        const rect = canvas.getBoundingClientRect();
        const clickX = e.clientX - rect.left + camera.x;
        const clickY = e.clientY - rect.top + camera.y;

        const tileX = Math.floor(clickX / TILE_SIZE);
        const tileY = Math.floor(clickY / TILE_SIZE);

        if(tileX < 0 || tileX >= MAP_SIZE || tileY < 0 || tileY >= MAP_SIZE) return;

        if (mode === 'move') {
            // –ò–¥–µ–º –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ–º
            player.targetX = tileX;
            player.targetY = tileY;
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫ –∫–ª–∏–∫–∞
            createParticle(tileX, tileY, 'üìç');
        } 
        else if (mode === 'build' && buildTarget) {
            tryBuild(tileX, tileY, buildTarget);
        }
    }

    function performActionAt(x, y) {
        const obj = getObjectAt(x, y);
        if(obj) {
            if(obj.type === T.TREE) {
                log("–†—É–±–∏–º –¥–µ—Ä–µ–≤–æ...");
                player.inv.wood += 2;
                player.energy -= 2;
                removeObjectAt(x, y);
                createParticle(x, y, 'ü™µ');
            } else if (obj.type === T.ROCK) {
                log("–î–æ–±—ã–≤–∞–µ–º –∫–∞–º–µ–Ω—å...");
                player.inv.stone += 1;
                player.energy -= 3;
                removeObjectAt(x, y);
                createParticle(x, y, '‚õèÔ∏è');
            }
        } else {
            // –ï—Å–ª–∏ —Ç–∞–π–ª –ø—É—Å—Ç–æ–π –∏ –µ—Å—Ç—å —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –µ–¥—É
            if(map[x][y] === T.GRASS && Math.random() < 0.3) {
                log("–ù–∞–π–¥–µ–Ω–∞ —è–≥–æ–¥–∞");
                player.inv.food += 1;
                createParticle(x, y, 'üçí');
            }
        }
        updateHUD();
    }

    function tryBuild(x, y, type) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ (—Å—Ç—Ä–æ–∏–º —Ä—è–¥–æ–º)
        const dist = Math.abs(player.x - x) + Math.abs(player.y - y);
        if(dist > 2) {
            log("–°–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ!");
            return;
        }

        const cost = getBuildCost(type);
        if(player.inv.wood >= cost.wood && player.inv.stone >= cost.stone) {
            // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
            player.inv.wood -= cost.wood;
            player.inv.stone -= cost.stone;

            // –°—Ç–∞–≤–∏–º
            if(type === 'floor') map[x][y] = T.FLOOR;
            else if(type === 'wall') objects.push({x, y, type: T.WALL, hp: 10});
            else if(type === 'fire') objects.push({x, y, type: T.FIRE, hp: 5});

            log(`–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ: ${type}`);
            createParticle(x, y, 'üî®');
            updateHUD();
        } else {
            log("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤!");
        }
    }

    // --- RENDER ---
    function render() {
        // –û—á–∏—Å—Ç–∫–∞
        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // –ì—Ä–∞–Ω–∏—Ü—ã –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
        const startCol = Math.floor(camera.x / TILE_SIZE);
        const endCol = startCol + (canvas.width / TILE_SIZE) + 1;
        const startRow = Math.floor(camera.y / TILE_SIZE);
        const endRow = startRow + (canvas.height / TILE_SIZE) + 1;

        // –†–∏—Å—É–µ–º –∫–∞—Ä—Ç—É
        for(let c = startCol; c <= endCol; c++) {
            for(let r = startRow; r <= endRow; r++) {
                if(c >= 0 && c < MAP_SIZE && r >= 0 && r < MAP_SIZE) {
                    const tileType = map[c][r];
                    const x = c * TILE_SIZE - camera.x;
                    const y = r * TILE_SIZE - camera.y;

                    // –§–æ–Ω —Ç–∞–π–ª–∞
                    ctx.fillStyle = COLORS[tileType] || '#f0f';
                    ctx.fillRect(x, y, TILE_SIZE, TILE_SIZE);
                    
                    // –°–µ—Ç–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                    ctx.strokeStyle = 'rgba(0,0,0,0.1)';
                    ctx.strokeRect(x, y, TILE_SIZE, TILE_SIZE);

                    // –î–µ–∫–æ—Ä –≤–æ–¥—ã
                    if(tileType === T.WATER) {
                         ctx.font = '20px Arial';
                         ctx.fillText('üåä', x + 5, y + 30);
                    }
                }
            }
        }

        // –†–∏—Å—É–µ–º –æ–±—ä–µ–∫—Ç—ã
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.font = '32px Arial';

        objects.forEach(obj => {
            const screenX = obj.x * TILE_SIZE - camera.x + TILE_SIZE/2;
            const screenY = obj.y * TILE_SIZE - camera.y + TILE_SIZE/2 + 4;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
            if(screenX > -TILE_SIZE && screenX < canvas.width + TILE_SIZE && 
               screenY > -TILE_SIZE && screenY < canvas.height + TILE_SIZE) {
                ctx.fillText(SPRITES[obj.type], screenX, screenY);
            }
        });

        // –†–∏—Å—É–µ–º –∏–≥—Ä–æ–∫–∞
        const px = player.x * TILE_SIZE - camera.x + TILE_SIZE/2;
        const py = player.y * TILE_SIZE - camera.y + TILE_SIZE/2;
        
        ctx.font = '36px Arial';
        ctx.fillText('üë®‚ÄçüöÄ', px, py);

        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ü–µ–ª–∏ –¥–≤–∏–∂–µ–Ω–∏—è
        if(player.targetX !== null) {
            const tx = player.targetX * TILE_SIZE - camera.x + TILE_SIZE/2;
            const ty = player.targetY * TILE_SIZE - camera.y + TILE_SIZE/2;
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            ctx.beginPath();
            ctx.arc(tx, ty, 5, 0, Math.PI*2);
            ctx.fill();
        }
        
        // –°–µ—Ç–∫–∞ –∫—É—Ä—Å–æ—Ä–∞ –≤ —Ä–µ–∂–∏–º–µ —Å—Ç—Ä–æ–π–∫–∏
        if(mode === 'build') {
             // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —Ç–∞–π–ª–∞ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º (–Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å pointermove)
        }
    }

    // --- UI FUNCTIONS ---
    function updateHUD() {
        document.getElementById('hp-bar').style.width = player.hp + '%';
        document.getElementById('hunger-bar').style.width = player.hunger + '%';
        document.getElementById('energy-bar').style.width = player.energy + '%';
        
        document.getElementById('res-wood').innerText = player.inv.wood;
        document.getElementById('res-stone').innerText = player.inv.stone;
        document.getElementById('res-food').innerText = player.inv.food;
    }

    function log(msg) {
        const div = document.createElement('div');
        div.className = 'log-entry';
        div.innerText = `> ${msg}`;
        const container = document.getElementById('game-log');
        container.appendChild(div);
        if(container.children.length > 5) container.removeChild(container.firstChild);
    }

    function createParticle(tileX, tileY, symbol) {
        // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    }

    // --- CONTROL MODES ---
    function setMode(m) {
        mode = m;
        document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`mode-${m}`).classList.add('active');
        
        const menu = document.getElementById('build-menu');
        if(m === 'build') {
            menu.classList.add('visible');
            buildTarget = null;
        } else {
            menu.classList.remove('visible');
        }
    }

    function selectBuild(type) {
        buildTarget = type;
        document.querySelectorAll('.build-item').forEach(b => b.classList.remove('selected'));
        event.currentTarget.classList.add('selected');
        log(`–í—ã–±—Ä–∞–Ω–æ: ${type}`);
    }

    function getBuildCost(type) {
        if(type === 'wall') return {wood: 5, stone: 0};
        if(type === 'floor') return {wood: 2, stone: 0};
        if(type === 'fire') return {wood: 10, stone: 5};
        if(type === 'bed') return {wood: 20, stone: 0};
        return {wood:0, stone:0};
    }

    function eatFood() {
        if(player.inv.food > 0) {
            player.inv.food--;
            player.hunger = Math.min(100, player.hunger + 20);
            player.hp = Math.min(100, player.hp + 5);
            log("–ù—è–º-–Ω—è–º! +20 –°—ã—Ç–æ—Å—Ç–∏");
            updateHUD();
        } else {
            log("–ù–µ—Ç –µ–¥—ã!");
        }
    }

    // START
    init();

</script>
</body>
</html>
